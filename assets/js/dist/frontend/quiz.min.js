this.LP=this.LP||{},this.LP.quiz=function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.wp.data}()},function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.compose}()},function(e,t,n){"use strict";e.exports=function(e){var t,n={};return function e(t,n){var r;if(Array.isArray(n))for(r=0;r<n.length;r++)e(t,n[r]);else for(r in n)t[r]=(t[r]||[]).concat(n[r])}(n,e),(t=function(e){return function(t){return function(r){var s,a,i=n[r.type],o=t(r);if(i)for(s=0;s<i.length;s++)(a=i[s](r,e))&&e.dispatch(a);return o}}}).effects=n,t}},function(e,t){!function(){e.exports=this.LP.dataControls}()},,function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)&&r.length){var i=s.apply(null,r);i&&e.push(i)}else if("object"===a)for(var o in r)n.call(r,o)&&r[o]&&e.push(o)}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(r=function(){return s}.apply(t,[]))||(e.exports=r)}()},,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return _n})),n.d(t,"MyContext",(function(){return hn}));var r={};n.r(r),n.d(r,"setQuizData",(function(){return gt})),n.d(r,"setCurrentQuestion",(function(){return ht})),n.d(r,"setCurrentPage",(function(){return vt})),n.d(r,"__requestBeforeStartQuiz",(function(){return Ot})),n.d(r,"__requestStartQuizSuccess",(function(){return wt})),n.d(r,"startQuiz",(function(){return _t})),n.d(r,"__requestSubmitQuiz",(function(){return Rt})),n.d(r,"__requestSubmitQuizSuccess",(function(){return jt})),n.d(r,"submitQuiz",(function(){return qt})),n.d(r,"updateUserQuestionAnswers",(function(){return Et})),n.d(r,"__requestShowHintSuccess",(function(){return Pt})),n.d(r,"showHint",(function(){return St})),n.d(r,"__requestCheckAnswerSuccess",(function(){return zt})),n.d(r,"checkAnswer",(function(){return kt})),n.d(r,"markQuestionRendered",(function(){return Qt})),n.d(r,"setQuizMode",(function(){return Nt})),n.d(r,"sendKey",(function(){return Tt}));var s={};n.r(s),n.d(s,"getQuestionOptions",(function(){return xt})),n.d(s,"getItemStatus",(function(){return Dt})),n.d(s,"getProp",(function(){return Ut})),n.d(s,"getQuizAttempts",(function(){return Mt})),n.d(s,"getQuizAnswered",(function(){return Ht})),n.d(s,"getQuestions",(function(){return Ft})),n.d(s,"getData",(function(){return Lt})),n.d(s,"getDefaultRestArgs",(function(){return Bt})),n.d(s,"getQuestionAnswered",(function(){return Kt})),n.d(s,"getCurrentQuestion",(function(){return Jt})),n.d(s,"getQuestion",(function(){return Zt})),n.d(s,"isCheckedAnswer",(function(){return Gt})),n.d(s,"isCorrect",(function(){return Wt})),n.d(s,"getQuestionsSelectedAnswers",(function(){return $t})),n.d(s,"getUserMark",(function(){return Yt}));var a=n(2),i=n(3),o=n(1),u=function(){var e=Object(o.select)("learnpress/quiz").getData("content");return React.createElement("div",{className:"quiz-content",dangerouslySetInnerHTML:{__html:e}})},c=n(0),l=function(e){var t;if(e>86400)t=(e-e%86400)/86400,e%=86400;else if(86400==e)return"24:00";var n=new Date(1e3*e).toUTCString().match(/\d{2}:\d{2}:\d{2}/)[0].split(":");return"00"===n[2]&&n.splice(2,1),"00"===n[0]&&(n[0]=0),t&&(n[0]=parseInt(n[0])+24*t),n.join(":")},f=LP.Hook,p=function(){var e=function(e){return Object(o.select)("learnpress/quiz").getData(e)},t=f.applyFilters("quiz-meta-fields",{duration:{title:Object(c.__)("Duration:","learnpress"),name:"duration",content:l(e("duration"))||"--"},passingGrade:{title:Object(c.__)("Passing grade:","learnpress"),name:"passing-grade",content:e("passingGrade")||"--"},questionsCount:{title:Object(c.__)("Questions:","learnpress"),name:"questions-count",content:e("questionIds")?e("questionIds").length:0}});return t&&React.createElement(React.Fragment,null,React.createElement("ul",{className:"quiz-intro"},Object.values(t).map((function(e,t){var n=e.name||t;return React.createElement("li",{key:"quiz-intro-field-".concat(t),className:"quiz-intro-item quiz-intro-item--".concat(n)},React.createElement("div",{className:"quiz-intro-item__title",dangerouslySetInnerHTML:{__html:e.title}}),React.createElement("span",{className:"quiz-intro-item__content",dangerouslySetInnerHTML:{__html:e.content}}))}))))};function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var s=R(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,e);var t,n,r,s=O(a);function a(){var e;g(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return j(_(e=s.call.apply(s,[this].concat(n))),"startQuiz",(function(t){t&&t.preventDefault();var n=e.props,r=n.startQuiz;if("completed"===n.status&&"no"===(0,Object(o.select)("learnpress/modal").confirm)("Are you sure you want to retry quiz?",e.startQuiz))return;r()})),j(_(e),"nav",(function(t){return function(n){var r=e.props,s=r.questionNav,a=r.currentPage,i=r.numPages,o=r.setCurrentPage;switch(t){case"prev":a>1?a-=1:a="infinity"===s?i:1;break;default:a<i?a+=1:a="infinity"===s?1:i}o(a)}})),j(_(e),"moveTo",(function(t){return function(n){n.preventDefault();var r=e.props,s=r.numPages,a=r.setCurrentPage;t<1||t>s||a(t)}})),j(_(e),"isLast",(function(){var t=e.props;return t.currentPage===t.numPages})),j(_(e),"isFirst",(function(){return 1===e.props.currentPage})),j(_(e),"submit",(function(){var t=e.props.submitQuiz;"no"!==(0,Object(o.select)("learnpress/modal").confirm)(Object(c.__)("Are you sure to submit quiz?","learnpress"),e.submit)&&t()})),j(_(e),"setQuizMode",(function(t){return function(){(0,e.props.setQuizMode)(t)}})),j(_(e),"isReviewing",(function(){return e.props.isReviewing})),e}return t=a,(n=[{key:"pageNumbers",value:function(e){var t=this,n=this.props,r=n.numPages,s=n.currentPage;if(r<2)return"";(e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({numPages:r,currentPage:s,midSize:1,endSize:1,prevNext:!0},e||{})).endSize<1&&(e.endSize=1),e.midSize<0&&(e.midSize=1);var a=m(Array(r).keys()),i=!1;return React.createElement("div",{className:"nav-links"},e.prevNext&&!this.isFirst()&&React.createElement("button",{className:"page-numbers prev","data-type":"question-navx",onClick:this.nav("prev")},Object(c.__)("Prev","learnpress")),a.map((function(n){return(n+=1)===e.currentPage?(i=!0,React.createElement("span",{key:"page-number-".concat(n),className:"page-numbers current"},n)):n<=e.endSize||e.currentPage&&n>=e.currentPage-e.midSize&&n<=e.currentPage+e.midSize||n>e.numPages-e.endSize?(i=!0,React.createElement("button",{key:"page-number-".concat(n),className:"page-numbers",onClick:t.moveTo(n)},n)):i?(i=!1,React.createElement("span",{key:"page-number-".concat(n),className:"page-numbers dots"},"â€¦")):""})),e.prevNext&&!this.isLast()&&React.createElement("button",{className:"page-numbers next","data-type":"question-navx",onClick:this.nav("next")},Object(c.__)("Next","learnpress")))}},{key:"render",value:function(){var e=this.props,t=e.status,n=e.questionNav,r=e.isReviewing,s=e.showReview,a=e.numPages,i=(e.question,e.questionsPerPage,e.canRetry),o=["quiz-buttons"];("started"===t||r)&&o.push("align-center"),"questionNav"===n&&o.push("infinity"),this.isFirst()&&o.push("is-first"),this.isLast()&&o.push("is-last");var u=document.querySelector("#popup-sidebar"),l=document.querySelector("#learn-press-quiz-app"),f="";return f="started"===t||r?{marginLeft:u&&u.offsetWidth/2,width:l&&l.offsetWidth}:null,React.createElement(React.Fragment,null,React.createElement("div",{className:o.join(" ")},React.createElement("div",{className:"button-left"+("started"===t||r?" fixed":""),style:f},("completed"===t&&i||-1!==["","viewed"].indexOf(t))&&!r&&React.createElement("button",{className:"lp-button start",onClick:this.startQuiz},"completed"===t?Object(c._x)("Retry","label button retry quiz","learnpress"):Object(c._x)("Start","label button start quiz","learnpress")),("started"===t||r)&&a>1&&React.createElement(React.Fragment,null,React.createElement("div",{className:"questions-pagination"},this.pageNumbers()))),React.createElement("div",{className:"button-right"},"started"===t&&React.createElement(React.Fragment,null,("infinity"===n||this.isLast())&&!r&&React.createElement("button",{className:"lp-button submit-quiz",onClick:this.submit},Object(c.__)("Submit","learnpress"))),r&&s&&React.createElement("button",{className:"lp-button back-quiz",onClick:this.setQuizMode("")},Object(c.__)("Result","learnpress")),"completed"===t&&s&&!r&&React.createElement("button",{className:"lp-button review-quiz",onClick:this.setQuizMode("reviewing")},Object(c.__)("Review","learnpress")))),this.props.message&&!0!==this.props.success&&React.createElement("div",{className:"learn-press-message error"},this.props.message))}}])&&h(t.prototype,n),r&&h(t,r),a}(a.Component),E=Object(i.compose)(Object(o.withSelect)((function(e){var t=e("learnpress/quiz").getData;return{status:t("status"),showCheck:t("instantCheck"),checkedQuestions:t("checkedQuestions"),hintedQuestions:t("hintedQuestions"),questionsPerPage:t("questionsPerPage")}})))((function(e){var t=e.showCheck,n=e.checkedQuestions,r=e.hintedQuestions,s=e.question,a=e.status,i=e.type,o=e.Button;if("started"!==a)return!1;var u=React.createElement(o,{question:s});switch(i){case"hint":return r?!!s.hasHint&&(-1===r.indexOf(s.id)&&u):u;case"check":return!!t&&(n?-1===n.indexOf(s.id)&&u:u)}})),P=Object(i.compose)([Object(o.withSelect)((function(e){var t=e("learnpress/quiz"),n=t.getData,r=t.getCurrentQuestion,s={id:n("id"),status:n("status"),questionIds:n("questionIds"),questionNav:n("questionNav"),isReviewing:n("reviewQuestions")&&"reviewing"===n("mode"),showReview:n("reviewQuestions"),showCheck:n("instantCheck"),checkedQuestions:n("checkedQuestions"),hintedQuestions:n("hintedQuestions"),numPages:n("numPages"),pages:n("pages"),currentPage:n("currentPage"),questionsPerPage:n("questionsPerPage"),pageNumbers:n("pageNumbers"),keyPressed:n("keyPressed"),canRetry:(n("attempts")||[]).length<n("attemptsCount")&&n("retry"),message:n("messageResponse")||!1,success:void 0===n("successResponse")||n("successResponse")};return 1===s.questionsPerPage&&(s.question=r("object")),s})),Object(o.withDispatch)((function(e,t){t.id;var n=e("learnpress/quiz"),r=n.startQuiz,s=n.setCurrentQuestion,a=n.submitQuiz,i=n.setQuizMode,o=n.showHint,u=n.checkAnswer;return{startQuiz:r,setCurrentQuestion:s,setQuizMode:i,setCurrentPage:n.setCurrentPage,submitQuiz:function(e){a(e)},showHint:function(e){o(e)},checkAnswer:function(e){u(e)}}}))])(q);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var s=A(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(a,e);var t,n,r,s=N(a);function a(){var e;z(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return C(I(e=s.call.apply(s,[this].concat(n))),"showHint",(function(){var t=e.props,n=t.showHint,r=t.question;n(r.id,!r.showHint)})),e}return t=a,(n=[{key:"render",value:function(){return this.props.question.hint?React.createElement("button",{className:"btn-show-hint",onClick:this.showHint},React.createElement("span",null,Object(c.__)("Hint","learnpress"))):""}}])&&k(t.prototype,n),r&&k(t,r),a}(a.Component),D=Object(i.compose)(Object(o.withDispatch)((function(e,t){t.id;var n=e("learnpress/quiz").showHint;return{showHint:function(e,t){n(e,t)}}})))(x),U=n(7),M=n.n(U);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=G(e);if(t){var s=G(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return J(this,n)}}function J(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(a,e);var t,n,r,s=K(a);function a(){var e;return F(this,a),W(Z(e=s.apply(this,arguments)),"checkAnswer",(function(){var t=e.props,n=t.checkAnswer,r=t.question;t.answered&&(n(r.id),e.setState({loading:!0}))})),e.state={loading:!1},e}return t=a,(n=[{key:"render",value:function(){var e=this.props.answered;return React.createElement(React.Fragment,null,React.createElement("button",{className:M()("lp-button","instant-check",{loading:this.state.loading,disable:!e}),onClick:this.checkAnswer},React.createElement("span",{className:"instant-check__icon"}),Object(c._x)("Check answer","label of button check answer","learnpress"),!e&&React.createElement("div",{className:"instant-check__info",dangerouslySetInnerHTML:{__html:Object(c.__)("You need to answer the question before check answer.","learnpress")}})))}}])&&L(t.prototype,n),r&&L(t,r),a}(a.Component),Y=Object(i.compose)(Object(o.withSelect)((function(e,t){var n=t.question.id;return{answered:(0,e("learnpress/quiz").getQuestionAnswered)(n)}})),Object(o.withDispatch)((function(e,t){t.id;var n=e("learnpress/quiz").checkAnswer;return{checkAnswer:function(e){n(e)}}})))($),V=function(e){var t=e.question,n={"instant-check":function(){return React.createElement(E,{type:"check",Button:Y,question:t})},hint:function(){return React.createElement(E,{type:"hint",Button:D,question:t})}};return React.createElement(React.Fragment,null,LP.config.questionFooterButtons().map((function(e){return React.createElement(a.Fragment,{key:"button-".concat(e)},n[e]&&n[e]())})))};function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ue(e);if(t){var s=ue(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?oe(e):t}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=window.jQuery,fe=lodash,pe=(fe.uniqueId,fe.isArray),de=(fe.isNumber,fe.bind,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(i,e);var t,n,r,s=ae(i);function i(){var e;return ne(this,i),ce(oe(e=s.apply(this,arguments)),"setRef",(function(t){e.$wrap=le(t)})),ce(oe(e),"parseOptions",(function(e){return e&&(e=pe(e)?e:JSON.parse(CryptoJS.AES.decrypt(e.data,e.key,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),e=pe(e)?e:JSON.parse(e)),e||[]})),ce(oe(e),"getWrapperClass",(function(){var t=e.props,n=t.question,r=(t.answered,["question","question-"+n.type]),s=e.parseOptions(n.options);return s.length&&void 0!==s[0].isTrue&&r.push("question-answered"),r})),ce(oe(e),"getEditLink",(function(){var t=e.props,n=t.question,r=t.editPermalink;return r?r.replace(/[0-9]+/,n.id):""})),ce(oe(e),"editPermalink",(function(e){return Object(c.sprintf)('<a href="%s">%s</a>',e,Object(c.__)("Edit","learnpress"))})),e.state={time:null,showHint:!1},e.$wrap=null,e}return t=i,(n=[{key:"componentDidMount",value:function(e){var t=this.props,n=t.question,r=t.isCurrent,s=t.markQuestionRendered;return r&&s(n.id),this.state.time||this.setState({time:new Date}),e}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,r=t.isShow,s=t.isShowIndex,i=(t.isShowHint,t.status),o=LP.questionTypes.default,u=this.getEditLink();u&&jQuery("#wp-admin-bar-edit-lp_question").find(".ab-item").attr("href",u);var l={index:function(){return s?React.createElement("span",{className:"question-index"},s,"."):""},title:function(){return n.title},hint:function(){return React.createElement(D,{question:n})},"edit-permalink":function(){return u&&React.createElement("span",{dangerouslySetInnerHTML:{__html:e.editPermalink(u)},className:"edit-link"})}},f={title:function(){return React.createElement("h4",{className:"question-title"},LP.config.questionTitleParts().map((function(e){return React.createElement(a.Fragment,{key:"title-part-".concat(e)},l[e]&&l[e]())})))},content:function(){return React.createElement("div",{className:"question-content",dangerouslySetInnerHTML:{__html:n.content}})},"answer-options":function(){return e.$wrap&&React.createElement(o,te(te({},e.props),{},{$wrap:e.$wrap}))},explanation:function(){return n.explanation&&React.createElement(React.Fragment,null,React.createElement("div",{className:"question-explanation-content"},React.createElement("strong",{className:"explanation-title"},Object(c.__)("Explanation:","learnpress")),React.createElement("div",{dangerouslySetInnerHTML:{__html:n.explanation}})))},hint:function(){return n.hint&&!n.explanation&&n.showHint&&React.createElement(React.Fragment,null,React.createElement("div",{className:"question-hint-content"},React.createElement("strong",{className:"hint-title"},Object(c.__)("Hint:","learnpress")),React.createElement("div",{dangerouslySetInnerHTML:{__html:n.hint}})))},buttons:function(){return"started"===i&&React.createElement(V,{question:n})}},p=LP.config.questionBlocks();return React.createElement(React.Fragment,null,React.createElement("div",{className:this.getWrapperClass().join(" "),style:{display:r?"":"none"},"data-id":n.id,ref:this.setRef},p.map((function(e){return React.createElement(a.Fragment,{key:"block-".concat(e)},f[e]?f[e]():"")}))))}}])&&re(t.prototype,n),r&&re(t,r),i}(a.Component)),me=Object(i.compose)([Object(o.withSelect)((function(e,t){var n=t.question.id,r=e("learnpress/quiz"),s=r.getData,a=r.getQuestionAnswered;return{status:s("status"),questions:s("question"),answered:a(n),questionsRendered:s("questionsRendered"),editPermalink:s("editPermalink"),numPages:s("numPages")}})),Object(o.withDispatch)((function(e){var t=e("learnpress/quiz"),n=t.updateUserQuestionAnswers;return{markQuestionRendered:t.markQuestionRendered,updateUserQuestionAnswers:n}}))])(de);function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_e(e);if(t){var s=_e(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return Oe(this,n)}}function Oe(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?we(e):t}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(a,e);var t,n,r,s=ve(a);function a(e){var t;return ye(this,a),Re(we(t=s.apply(this,arguments)),"startQuiz",(function(e){e.preventDefault(),(0,t.props.startQuiz)()})),Re(we(t),"isInVisibleRange",(function(e,n){var r=t.props,s=r.currentPage,a=r.questionsPerPage;return s===Math.ceil(n/a)})),Re(we(t),"nav",(function(e){var n=t.props.sendKey;switch(e.keyCode){case 37:return n("left");case 38:return;case 39:return n("right");case 40:return;default:e.keyCode>=49&&e.keyCode<=57&&n(e.keyCode-48)}})),t.needToTop=!1,t.state={isReviewing:null,currentPage:0,self:we(t)},t}return t=a,r=[{key:"getDerivedStateFromProps",value:function(e,t){for(var n=["isReviewing","currentPage"],r={},s=0;s<n.length;s++)e[n[s]]!==t[n[s]]&&(r[n[s]]=e[n[s]]);return Object.values(r).length?(t.self.needToTop=!0,r):null}}],(n=[{key:"componentDidUpdate",value:function(){this.needToTop&&(jQuery("#popup-content").animate({scrollTop:0}).find(".content-item-scrollable:last").animate({scrollTop:0}),this.needToTop=!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.status,r=t.currentQuestion,s=t.questions,a=t.questionsRendered,i=t.isReviewing,o=t.questionsPerPage,u=!0;return"completed"!==n||i||(u=!1),React.createElement(React.Fragment,null,React.createElement("div",{tabIndex:100,onKeyUp:this.nav},React.createElement("div",{className:"quiz-questions",style:{display:u?"":"none"}},s.map((function(t,n){var s=!o&&r===t.id,i=a&&-1!==a.indexOf(t.id),u=e.isInVisibleRange(t.id,n+1);return i||!i||u?React.createElement(me,{key:"loop-question-".concat(t.id),isCurrent:s,isShow:u,isShowIndex:!!o&&n+1,questionsPerPage:o,question:t}):""})))))}}])&&ge(t.prototype,n),r&&ge(t,r),a}(a.Component),qe=Object(i.compose)(Object(o.withSelect)((function(e,t,n){var r=e("learnpress/quiz"),s=r.getData,a=r.getQuestions;return{status:s("status"),currentQuestion:s("currentQuestion"),questions:a(),questionsRendered:s("questionsRendered"),isReviewing:"reviewing"===s("mode"),numPages:s("numPages"),currentPage:s("currentPage"),questionsPerPage:s("questionsPerPage")||1}})),Object(o.withDispatch)((function(e){var t=e("learnpress/quiz");return{startQuiz:t.startQuiz,sendKey:t.sendKey}})))(je),Ee=function(){var e=Object(o.select)("learnpress/quiz").getData("attempts")||[],t=e&&!!e.length;return!!t&&React.createElement(React.Fragment,null,React.createElement("div",{className:"quiz-attempts"},React.createElement("h4",{className:"attempts-heading"},Object(c.__)("Last Attempted","learnpress")),t&&React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:"quiz-attempts__date"},Object(c.__)("Date","learnpress")),React.createElement("th",{className:"quiz-attempts__questions"},Object(c.__)("Questions","learnpress")),React.createElement("th",{className:"quiz-attempts__spend"},Object(c.__)("Spend","learnpress")),React.createElement("th",{className:"quiz-attempts__marks"},Object(c.__)("Marks","learnpress")),React.createElement("th",{className:"quiz-attempts__grade"},Object(c.__)("Passing Grade","learnpress")),React.createElement("th",{className:"quiz-attempts__result"},Object(c.__)("Result","learnpress")))),React.createElement("tbody",null,e.map((function(e){return React.createElement("tr",{key:"attempt-".concat(e.id)},React.createElement("td",{className:"quiz-attempts__date"},e.startTime),React.createElement("td",{className:"quiz-attempts__questions"},"".concat(e.questionCorrect," / ").concat(e.questionCount)),React.createElement("td",{className:"quiz-attempts__spend"},"".concat((t=e,n=new Date(t.endTime).getTime()-new Date(t.startTime).getTime(),n?l(n/1e3):"")," / ").concat(function(e){if(!e.expirationTime)return Object(c.__)("Unlimited","learnpress");var t=new Date(e.expirationTime).getTime()-new Date(e.startTime).getTime();return t?l(t/1e3):""}(e))),React.createElement("td",{className:"quiz-attempts__marks"},"".concat(e.userMark," / ").concat(e.mark)),React.createElement("td",{className:"quiz-attempts__grade"},e.passingGrade||Object(c._x)("-","unknown passing grade value","learnpress")),React.createElement("td",{className:"quiz-attempts__result"},"".concat(parseFloat(e.result).toFixed(2),"%")," ",React.createElement("span",null,e.graduationText)));var t,n}))))))};function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,s=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(s)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ze=function(){var e=Object(o.select)("learnpress/quiz").getData,t=Object(o.dispatch)("learnpress/quiz").submitQuiz,n=e("totalTime")?e("totalTime"):e("duration"),r=e("endTime"),s=new Date(r),i=new Date,u=(new Date).getTimezoneOffset(),c=parseInt(s.getTime()/1e3-(i.getTime()/1e3+60*u)),l=Pe(Object(a.useState)(c>0?c:0),2),f=l[0],p=l[1];Object(a.useEffect)((function(){var e=setInterval((function(){var n=f;(n-=1)>0?p(n):(clearInterval(e),t())}),1e3);return function(){return clearInterval(e)}}),[f]);return React.createElement("div",{className:"countdown"},React.createElement("i",{className:"fas fa-stopwatch"}),React.createElement("span",null,function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":",r=[];return n<3600?(r.push((f-f%60)/60),r.push(f%60)):n&&(r.push((f-f%3600)/3600),e=f%3600,r.push((e-e%60)/60),r.push(e%60)),r.map((function(e){return e<10?"0".concat(e):e})).join(t)}()))};function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,s=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(s)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ne=lodash.debounce,Te=function(){var e=ke(Object(a.useState)(0),2),t=e[0],n=e[1],r=ke(Object(a.useState)(!1),2),s=r[0],i=r[1],u=Object(o.useSelect)((function(e){return e("learnpress/quiz").getData("results")}),[]),l=Object(o.useSelect)((function(e){return e("learnpress/quiz").getData("passingGrade")}),[]);Object(a.useEffect)((function(){f()}),[u]);var f=function(){n(0),i(!1),jQuery.easing._customEasing=function(e,t,n,r,s){return r*Math.sqrt(1-(t=t/s-1)*t)+n},Ne((function(){var e=jQuery("<span />").css({width:1,height:1}).appendTo(document.body);e.css("left",0).animate({left:u.result},{duration:1500,step:function(e,t){n(e)},done:function(){i(!0),e.remove(),jQuery("#quizResultGrade").css({transform:"scale(1.3)",transition:"all 0.25s"}),Ne((function(){jQuery("#quizResultGrade").css({transform:"scale(1)"})}),500)()},easing:"_customEasing"})}),u.result>0?1e3:10)()},p=t;Number.isInteger(t)||(p=parseFloat(t).toFixed(2));var d=190*Math.PI,m=d-p/100*d,b={strokeDasharray:"".concat(d," ").concat(d),strokeDashoffset:m},y=u.passingGrade||l,g="";g=u.graduation?u.graduation:p>=y.replace(/[^0-9\.]+/g,"")?"passed":"failed";var h="";h=u.graduationText?u.graduationText:"passed"===g?Object(c.__)("Passed","learnpress"):Object(c.__)("Failed","learnpress");var v=["quiz-result",g];return React.createElement("div",{className:v.join(" ")},React.createElement("h3",{className:"result-heading"},Object(c.__)("Your Result","learnpress")),React.createElement("div",{id:"quizResultGrade",className:"result-grade"},React.createElement("svg",{className:"circle-progress-bar",width:200,height:200},React.createElement("circle",{className:"circle-progress-bar__circle",stroke:"",strokeWidth:10,style:b,fill:"transparent",r:95,cx:100,cy:100})),React.createElement("span",{className:"result-achieved"},"".concat(p,"%")),React.createElement("span",{className:"result-require"},y||Object(c._x)("-","unknown passing grade value","learnpress"))),s&&React.createElement("p",{className:"result-message"},h),React.createElement("ul",{className:"result-statistic"},React.createElement("li",{className:"result-statistic-field result-time-spend"},React.createElement("span",null,Object(c.__)("Time spend","learnpress")),React.createElement("p",null,u.timeSpend)),React.createElement("li",{className:"result-statistic-field result-point"},React.createElement("span",null,Object(c.__)("Point","learnpress")),React.createElement("p",null,u.userMark," / ",u.mark)),React.createElement("li",{className:"result-statistic-field result-questions"},React.createElement("span",null,Object(c.__)("Questions","learnpress")),React.createElement("p",null,u.questionCount)),React.createElement("li",{className:"result-statistic-field result-questions-correct"},React.createElement("span",null,Object(c.__)("Correct","learnpress")),React.createElement("p",null,u.questionCorrect)),React.createElement("li",{className:"result-statistic-field result-questions-wrong"},React.createElement("span",null,Object(c.__)("Wrong","learnpress")),React.createElement("p",null,u.questionWrong)),React.createElement("li",{className:"result-statistic-field result-questions-skipped"},React.createElement("span",null,Object(c.__)("Skipped","learnpress")),React.createElement("p",null,u.questionEmpty))))},Ie=jQuery,Ae=lodash.debounce,Ce=function(){var e=Object(o.dispatch)("learnpress/quiz").submitQuiz;Object(a.useEffect)((function(){var e=Ie("#popup-content"),t=e.find(".content-item-scrollable:eq(1)"),n=e.find(".content-item-wrap"),r=e.find(".quiz-status"),s=r.offset().top-92,a=!1,i="-"+n.css("margin-left");Ie(window).on("resize.refresh-quiz-stauts-bar",Ae((function(){i="-"+n.css("margin-left"),r.css({"margin-left":i,"margin-right":i})}),100)).trigger("resize.refresh-quiz-stauts-bar"),t.on("scroll",(function(){if(t.scrollTop()>=s){if(a)return;a=!0}else{if(!a)return;a=!1}a?e.addClass("fixed-quiz-status"):e.removeClass("fixed-quiz-status")}))}),[]);var t=Object(o.select)("learnpress/quiz"),n=t.getData,r=t.getUserMark,s=n("currentPage"),i=n("questionsPerPage"),u=n("questionIds").length,l=n("submitting"),f=n("totalTime"),p=n("duration"),d=r(),m=["quiz-status"],b=(s-1)*i+1,y=b+i-1,g="";return y=Math.min(y,u),l&&m.push("submitting"),g=y<u?i>1?Object(c.sprintf)(Object(c.__)("Question <span>%d to %d of %d</span>","learnpress"),b,y,u):Object(c.sprintf)(Object(c.__)("Question <span>%d of %d</span>","learnpress"),b,u):Object(c.sprintf)(Object(c.__)("Question <span>%d to %d</span>","learnpress"),b,y),React.createElement("div",{className:m.join(" ")},React.createElement("div",null,React.createElement("div",{className:"questions-index",dangerouslySetInnerHTML:{__html:g}}),React.createElement("div",{className:"current-point"},Object(c.sprintf)(Object(c.__)("Earned Point: %s","learnpress"),d)),React.createElement("div",null,React.createElement("div",{className:"submit-quiz"},React.createElement("button",{className:"lp-button",id:"button-submit-quiz",onClick:function t(){"no"!==(0,Object(o.select)("learnpress/modal").confirm)(Object(c.__)("Are you sure to submit quiz?","learnpress"),t)&&e()}},l?Object(c.__)("Submitting...","learnpress"):Object(c.__)("Submit","learnpress"))),f&&p&&React.createElement(ze,null))))};function xe(e){return function(e){if(Array.isArray(e))return De(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return De(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return De(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe=lodash,Le=(Fe.omit,Fe.flow),Be=Fe.isArray,Ke=Fe.chunk,Je=(LP.camelCaseDashObjectKeys,LP.localStorage),Ze=Je.get,Ge=Je.set,We={},$e=function(e,t){var n=Me(Me({},e.answered[t.questionId]||{}),{},{answered:t.answers,temp:!0});return Me(Me({},e),{},{answered:Me(Me({},e.answered),{},He({},t.questionId,n))})},Ye=function(e,t){var n=e.questionsRendered;return Be(n)?(n.push(t.questionId),Me(Me({},e),{},{questionsRendered:xe(n)})):Me(Me({},e),{},{questionsRendered:[t.questionId]})},Ve=function(e,t){return t.currentPage&&Ge("Q".concat(e.id,".currentPage"),t.currentPage),Me(Me({},e),t)},Xe=function(e,t){var n=e.questions.map((function(e){return e.id==t.questionId?Me(Me({},e),{},{showHint:t.showHint}):e}));return Me(Me({},e),{},{questions:xe(n)})},et=function(e,t){var n=e.questions.map((function(e){if(e.id!==t.questionId)return e;var n={explanation:t.explanation};return t.options&&(n.options=t.options),Me(Me({},e),n)}));return Me(Me({},e),{},{questions:xe(n),answered:Me(Me({},e.answered),{},He({},t.questionId,t.result)),checkedQuestions:[].concat(xe(e.checkedQuestions),[t.questionId])})},tt=function(e,t){var n=e.questions.map((function(n){var r={};return e.reviewQuestions&&(t.results.questions[n.id].explanation&&(r.explanation=t.results.questions[n.id].explanation),t.results.questions[n.id].options&&(r.options=t.results.questions[n.id].options)),Me(Me({},n),r)}));return Ve(e,Me(Me({submitting:!1,currentPage:1},t.results),{},{questions:xe(n)}))},nt=function(e,t){var n=void 0!==t.results.success&&t.results.success,r=t.results.message||!1;return Ve(e,Me(Me({checkedQuestions:[],hintedQuestions:[],mode:"",currentPage:1},t.results.results),{},{successResponse:n,messageResponse:r}))},rt=Le(o.combineReducers,(function(e){return function(t,n){return e(t,n)}}),(function(e){return function(t,n){return e(t,n)}}),(function(e){return function(t,n){return e(t,n)}}))({a:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{a:1};return e},b:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{b:2};return e}}),st=Object(o.combineReducers)({blocks:rt,userQuiz:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUIZ_DATA":1>t.data.questionsPerPage&&(t.data.questionsPerPage=1);var n=Ke(e.questionIds||t.data.questionIds,t.data.questionsPerPage);return t.data.numPages=n.length,t.data.pages=n,Me(Me(Me({},e),t.data),{},{currentPage:Ze("Q".concat(t.data.id,".currentPage"))||t.data.currentPage});case"SUBMIT_QUIZ":return Me(Me({},e),{},{submitting:!0});case"START_QUIZ":case"START_QUIZ_SUCCESS":return nt(e,t);case"SET_CURRENT_QUESTION":return Ge("Q".concat(e.id,".currentQuestion"),t.questionId),Me(Me({},e),{},{currentQuestion:t.questionId});case"SET_CURRENT_PAGE":return Ge("Q".concat(e.id,".currentPage"),t.currentPage),Me(Me({},e),{},{currentPage:t.currentPage});case"SUBMIT_QUIZ_SUCCESS":return tt(e,t);case"UPDATE_USER_QUESTION_ANSWERS":return"started"===e.status?$e(e,t):e;case"MARK_QUESTION_RENDERED":return Ye(e,t);case"SET_QUIZ_MODE":return"reviewing"==t.mode?Ve(e,{mode:t.mode}):Me(Me({},e),{},{mode:t.mode});case"SET_QUESTION_HINT":return Xe(e,t);case"CHECK_ANSWER":return et(e,t);case"SEND_KEY":return Me(Me({},e),{},{keyPressed:t.keyPressed})}return e}}),at=n(5);function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ot=regeneratorRuntime.mark(qt),ut=regeneratorRuntime.mark(St),ct=regeneratorRuntime.mark(kt);function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e){return function(e){if(Array.isArray(e))return pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dt(){var e=[].slice.call(arguments,2),t=Object(o.dispatch)(arguments[0]),n=arguments[1];t[n].apply(t,ft(e))}var mt=LP,bt=mt.camelCaseDashObjectKeys,yt=mt.Hook;function gt(e,t){return t="string"==typeof e?lt({},e,t):e,{type:"SET_QUIZ_DATA",data:bt(t)}}function ht(e){return{type:"SET_CURRENT_QUESTION",questionId:e}}function vt(e){return{type:"SET_CURRENT_PAGE",currentPage:e}}function Ot(e,t,n){return{type:"BEFORE_START_QUIZ"}}function wt(e,t,n,r){return yt.doAction("quiz-started",e,t,n,r),{type:"START_QUIZ_SUCCESS",quizId:t,courseId:n,userId:r,results:e}}var _t=regeneratorRuntime.mark((function e(){var t,n,r,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(o.select)("learnpress/quiz").getDefaultRestArgs(),n=t.itemId,r=t.courseId,!0===yt.applyFilters("before-start-quiz",!0,n,r)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(at.apiFetch)({path:"lp/v1/users/start-quiz",method:"POST",data:{item_id:n,course_id:r}});case 6:return s=e.sent,s=yt.applyFilters("request-start-quiz-response",s,n,r),e.next=10,dt("learnpress/quiz","__requestStartQuizSuccess",bt(s),n,r);case 10:case"end":return e.stop()}}),e)}));function Rt(){return{type:"SUBMIT_QUIZ"}}function jt(e,t,n){return yt.doAction("quiz-submitted",e,t,n),{type:"SUBMIT_QUIZ_SUCCESS",results:e}}function qt(){var e,t,n,r,s,a,i,u;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=Object(o.select)("learnpress/quiz"),t=e.getDefaultRestArgs,n=e.getQuestionsSelectedAnswers,r=t(),s=r.itemId,a=r.courseId,!0===yt.applyFilters("before-submit-quiz",!0)){c.next=5;break}return c.abrupt("return");case 5:return i=n(),c.next=8,Object(at.apiFetch)({path:"lp/v1/users/submit-quiz",method:"POST",data:{item_id:s,course_id:a,answered:i}});case 8:if(u=c.sent,!(u=yt.applyFilters("request-submit-quiz-response",u,s,a)).success){c.next=13;break}return c.next=13,dt("learnpress/quiz","__requestSubmitQuizSuccess",bt(u.results),s,a);case 13:case"end":return c.stop()}}),ot)}function Et(e,t,n){return{type:"UPDATE_USER_QUESTION_ANSWERS",questionId:e,answers:t}}function Pt(e,t){return{type:"SET_QUESTION_HINT",questionId:e,showHint:t}}function St(e,t){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,dt("learnpress/quiz","__requestShowHintSuccess",e,t);case 2:case"end":return n.stop()}}),ut)}function zt(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"CHECK_ANSWER",questionId:e},t)}function kt(e){var t,n,r,s,a,i,u;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=Object(o.select)("learnpress/quiz"),n=t.getDefaultRestArgs,r=t.getQuestionAnswered,s=n(),a=s.itemId,i=s.courseId,c.next=4,Object(at.apiFetch)({path:"lp/v1/users/check-answer",method:"POST",data:{item_id:a,course_id:i,question_id:e,answered:r(e)||""}});case 4:return u=c.sent,c.next=7,dt("learnpress/quiz","__requestCheckAnswerSuccess",e,bt(u));case 7:case"end":return c.stop()}}),ct)}function Qt(e){return{type:"MARK_QUESTION_RENDERED",questionId:e}}function Nt(e){return{type:"SET_QUIZ_MODE",mode:e}}function Tt(e){return setTimeout((function(){dt("learnpress/quiz","sendKey","")}),300),{type:"SEND_KEY",keyPressed:e}}var It=lodash,At=It.get,Ct=It.isArray,xt=function(e,t){console.time("parseOptions");var n=Zt(e,t).options;return n=Ct(n)?n:JSON.parse(CryptoJS.AES.decrypt(n.data,n.key,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),n=Ct(n)?n:JSON.parse(n),console.timeEnd("parseOptions"),n};function Dt(e,t){var n=Object(o.select)("course-learner/user").getItemById(t);return n?At(n,"userSettings.status"):""}function Ut(e,t,n){return e[t]||n}function Mt(e,t){var n=Object(o.select)("course-learner/user").getItemById(t);return n?At(n,"userSettings.attempts"):[]}function Ht(e,t){var n=Object(o.select)("course-learner/user").getItemById(t);return n?At(n,"userSettings.answered",{}):{}}function Ft(e){var t=e.userQuiz,n=At(t,"questions");return n?Object.values(n):[]}function Lt(e,t){var n=e.userQuiz;return t?At(n,t):n}function Bt(e){var t=e.userQuiz;return{itemId:t.id,courseId:t.courseId}}function Kt(e,t){var n=e.userQuiz;return At(n,"answered.".concat(t,".answered"))||void 0}function Jt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=At(e,"userQuiz.questionsPerPage")||1;if(n>1)return!1;var r=At(e,"userQuiz.currentPage")||1;return At(e,"object"===t?"userQuiz.questions[".concat(r-1,"]"):"userQuiz.questionIds[".concat(r-1,"]"))}var Zt=function(e,t){e.userQuiz;return Object(o.select)("learnpress/quiz").getQuestions().find((function(e){return e.id==t}))};function Gt(e,t){return-1!==(At(e,"userQuiz.checkedQuestions")||[]).indexOf(t)}function Wt(e,t){}var $t=function(e,t){var n=At(e,"userQuiz.answered"),r={};for(var s in n)if(n.hasOwnProperty(s)&&n[s].temp){if(t&&s===t)return n[s].answered;r[s]=n[s].answered}return r};function Yt(e){var t=e.userQuiz||{},n=t.answered,r=t.negativeMarking,s=t.questions,a=t.checkedQuestions,i=0,o=function(e){if(!n.hasOwnProperty(e))return u=e,"continue";e=parseInt(e);var t,o=n[e],c=o.questionMark?o.questionMark:(t=s.find((function(t){return u=e,t.id===e})),u=e,t?t.point:0);a.indexOf(e);if(o.temp)return u=e,"continue";r?o.answered&&(i=o.correct?i+o.mark:i-c):o.answered&&o.correct&&(i+=o.mark),u=e};for(var u in n)o(u);return i>0?i:0}var Vt=n(4),Xt=n.n(Vt),en={ENROLL_COURSE_X:function(e,t){}};var tn=function(e){var t=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},n={getState:e.getState,dispatch:function(){return t.apply(void 0,arguments)}};return t=Xt()(en)(n)(e.dispatch),e.dispatch=t,e};function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sn=LP.dataControls.controls,an=Object(o.registerStore)("learnpress/quiz",{reducer:st,selectors:s,actions:r,controls:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},sn)});tn(an);function on(e){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mn(e);if(t){var s=mn(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return pn(this,n)}}function pn(e,t){return!t||"object"!==on(t)&&"function"!=typeof t?dn(e):t}function dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yn=lodash,gn=yn.chunk,hn=(yn.isNumber,jQuery,React.createContext({status:-1})),vn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}(a,e);var t,n,r,s=fn(a);function a(e){var t;return un(this,a),bn(dn(t=s.apply(this,arguments)),"startQuiz",(function(e){t.props.startQuiz()})),t.state={currentPage:1,numPages:0,pages:[]},t}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.settings,n=e.setQuizData,r=t.question_ids,s=t.questions_per_page,a=gn(r,s);t.currentPage=1,t.numPages=a.length,t.pages=a,n(t)}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.status,n=e.isReviewing,r=-1!==["","completed","viewed"].indexOf(t)||!t,s=-1!==["","viewed",void 0].indexOf(t)||!t;return void 0!==t&&React.createElement(React.Fragment,null,React.createElement(hn.Provider,{value:this.props}),React.createElement("div",null,!n&&"completed"===t&&React.createElement(Te,null),!n&&s&&React.createElement(p,null),!n&&s&&React.createElement(u,null),"started"===t&&React.createElement(Ce,null),(-1!==["completed","started"].indexOf(t)||n)&&React.createElement(qe,null),React.createElement(P,null),r&&!n&&React.createElement(Ee,null)))}}])&&cn(t.prototype,n),r&&cn(t,r),a}(a.Component),On=Object(i.compose)([Object(o.withSelect)((function(e){var t=e("learnpress/quiz"),n=t.getQuestions,r=t.getData;return{questions:n(),status:r("status"),store:r(),answered:r("answered"),isReviewing:"reviewing"===r("mode"),questionIds:r("questionIds"),checkCount:r("instantCheck"),questionsPerPage:r("questionsPerPage")||1}})),Object(o.withDispatch)((function(e){var t=e("learnpress/quiz");return{setQuizData:t.setQuizData,startQuiz:t.startQuiz}}))])(vn),wn=LP.modal.default,_n=(t.default=On,function(e,t){wp.element.render(React.createElement(wn,null,React.createElement(On,{settings:t})),jQuery(e)[0])})}]);